{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport LayoutDiv from \"../LayoutDiv.vue\";\nexport default {\n  name: \"DashboardPage\",\n  components: {\n    LayoutDiv\n  },\n  data() {\n    return {\n      user: {},\n      results: [],\n      titles: [],\n      rows: [],\n      keys: []\n    };\n  },\n  created() {\n    this.getUser();\n    this.load_book_list();\n    //  if(localStorage.getItem('token') == \"\" || localStorage.getItem('token') == null){\n    //    this.$router.push('/')\n    //  }else {\n    //    this.getUser();\n    //  }\n  },\n  methods: {\n    getUser() {\n      axios.get(\"/api/user\", {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n      }).then(r => {\n        this.user = r.data;\n        return r;\n      }).catch(e => {\n        return e;\n      });\n    },\n    logoutAction() {\n      localStorage.setItem(\"token\", \"\");\n      this.$router.push(\"/\");\n    },\n    load_book_list() {\n      axios.get(\"http://127.0.0.1:5000/book_list\").then(r => {\n        console.log(r.data);\n        this.results = r.data;\n        for (var i = 0; i < r.data.length; i++) {\n          this.titles.push(r.data[i].title);\n          this.rows.push(i);\n        }\n        console.log(this.titles);\n        this.keys = Object.keys(this.results[0]);\n        console.log(this.keys);\n      }).catch(e => {\n        return e;\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","LayoutDiv","name","components","data","user","results","titles","rows","keys","created","getUser","load_book_list","methods","get","headers","Authorization","localStorage","getItem","then","r","catch","e","logoutAction","setItem","$router","push","console","log","i","length","title","Object"],"sources":["/Users/waiwai/Desktop/Vuejs/model-project/src/components/pages/DashboardPage.vue"],"sourcesContent":["<template>\n  <layout-div>\n    <div class=\"row justify-content-md-center\">\n      <div class=\"col-12\">\n        <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n          <div class=\"container-fluid\">\n            <a class=\"navbar-brand\" href=\"#\">Dashboard</a>\n            <div class=\"d-flex\">\n              <ul class=\"navbar-nav\">\n                <li class=\"nav-item\">\n                  <a @click=\"logoutAction()\" class=\"nav-link\" aria-current=\"page\" href=\"#\">Logout</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </nav>\n        <h2 class=\"text-center mt-5\">Welcome, {{ user?.name }}!</h2>\n        <div id=\"app\">\n          <div>\n            <select v-model=\"column\">\n              <option :value=\"null\">No Column Filter</option>\n              <option v-for=\"col in this.keys\" :key=\"col\">{{ col }}</option>\n            </select>\n            <input type=\"text\" v-model=\"search\" placeholder=\"Search\">\n          </div>\n          <table>\n            <thead>\n              <tr>\n                <th v-for=\"col in this.keys\" :key=\"col\">{{ col }}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"row in this.rows\" :key=\"row.id\">\n                <!-- <td>{{row}}</td> -->\n                <!-- <td>{{this.results[row]}}</td> -->\n                <!-- <td v-for=\"col in this.results[row]\" :key=\"col.id\">{{ this.results[row][col] }}</td> -->\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n      </div>\n    </div>\n  </layout-div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport LayoutDiv from \"../LayoutDiv.vue\";\n\nexport default {\n  name: \"DashboardPage\",\n  components: {\n    LayoutDiv\n  },\n  data() {\n    return {\n      user: {},\n      results: [],\n      titles: [],\n      rows: [],\n      keys:[]\n    };\n  },\n  created() {\n    this.getUser();\n    this.load_book_list();\n    //  if(localStorage.getItem('token') == \"\" || localStorage.getItem('token') == null){\n    //    this.$router.push('/')\n    //  }else {\n    //    this.getUser();\n    //  }\n  },\n  methods: {\n    getUser() {\n      axios\n        .get(\"/api/user\", {\n          headers: { Authorization: \"Bearer \" + localStorage.getItem(\"token\") },\n        })\n        .then((r) => {\n          this.user = r.data;\n          return r;\n        })\n        .catch((e) => {\n          return e;\n        });\n    },\n    logoutAction() {\n      localStorage.setItem(\"token\", \"\");\n      this.$router.push(\"/\");\n    },\n    load_book_list() {\n      axios\n        .get(\"http://127.0.0.1:5000/book_list\")\n        .then((r) => {\n          console.log(r.data);\n          this.results = r.data;\n          for (var i = 0; i < r.data.length; i++) {\n            this.titles.push(r.data[i].title);\n            this.rows.push(i);\n          }\n          console.log(this.titles);\n          this.keys = Object.keys(this.results[0]);\n          console.log(this.keys);\n\n        })\n        .catch((e) => {\n          return e;\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n/* * {\n  margin: 0;\n  padding: 0;\n} */\n\nbody {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n#app {\n  width: 20rem;\n}\n\n#app > div {\n  display: flex;\n  flex-direction: row;\n}\n\nselect, input {\n  width: 50%;\n}\n\ntable {\n  width: 100%;\n  border: 1px solid black;\n  text-align: center;\n  border-spacing: 0;\n}\n\ntd {\n  border-top: 1px solid black;\n}\n\n\n</style>\n"],"mappings":";AA+CA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,SAAQ,MAAO,kBAAkB;AAExC,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,CAAC,CAAC;MACRC,OAAO,EAAE,EAAE;MACXC,MAAM,EAAE,EAAE;MACVC,IAAI,EAAE,EAAE;MACRC,IAAI,EAAC;IACP,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,OAAO,CAAC,CAAC;IACd,IAAI,CAACC,cAAc,CAAC,CAAC;IACrB;IACA;IACA;IACA;IACA;EACF,CAAC;EACDC,OAAO,EAAE;IACPF,OAAOA,CAAA,EAAG;MACRX,KAAI,CACDc,GAAG,CAAC,WAAW,EAAE;QAChBC,OAAO,EAAE;UAAEC,aAAa,EAAE,SAAQ,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO;QAAE;MACtE,CAAC,EACAC,IAAI,CAAEC,CAAC,IAAK;QACX,IAAI,CAACf,IAAG,GAAIe,CAAC,CAAChB,IAAI;QAClB,OAAOgB,CAAC;MACV,CAAC,EACAC,KAAK,CAAEC,CAAC,IAAK;QACZ,OAAOA,CAAC;MACV,CAAC,CAAC;IACN,CAAC;IACDC,YAAYA,CAAA,EAAG;MACbN,YAAY,CAACO,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;MACjC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;IACxB,CAAC;IACDd,cAAcA,CAAA,EAAG;MACfZ,KAAI,CACDc,GAAG,CAAC,iCAAiC,EACrCK,IAAI,CAAEC,CAAC,IAAK;QACXO,OAAO,CAACC,GAAG,CAACR,CAAC,CAAChB,IAAI,CAAC;QACnB,IAAI,CAACE,OAAM,GAAIc,CAAC,CAAChB,IAAI;QACrB,KAAK,IAAIyB,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAIT,CAAC,CAAChB,IAAI,CAAC0B,MAAM,EAAED,CAAC,EAAE,EAAE;UACtC,IAAI,CAACtB,MAAM,CAACmB,IAAI,CAACN,CAAC,CAAChB,IAAI,CAACyB,CAAC,CAAC,CAACE,KAAK,CAAC;UACjC,IAAI,CAACvB,IAAI,CAACkB,IAAI,CAACG,CAAC,CAAC;QACnB;QACAF,OAAO,CAACC,GAAG,CAAC,IAAI,CAACrB,MAAM,CAAC;QACxB,IAAI,CAACE,IAAG,GAAIuB,MAAM,CAACvB,IAAI,CAAC,IAAI,CAACH,OAAO,CAAC,CAAC,CAAC,CAAC;QACxCqB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACnB,IAAI,CAAC;MAExB,CAAC,EACAY,KAAK,CAAEC,CAAC,IAAK;QACZ,OAAOA,CAAC;MACV,CAAC,CAAC;IACN;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}